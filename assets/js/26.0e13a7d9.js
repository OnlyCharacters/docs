(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{307:function(t,s,a){"use strict";a.r(s);var n=a(14),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"编译安装可分发的-openresty"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#编译安装可分发的-openresty"}},[t._v("#")]),t._v(" 编译安装可分发的 openresty")]),t._v(" "),s("h3",{attrs:{id:"_0-资源准备"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_0-资源准备"}},[t._v("#")]),t._v(" 0. 资源准备")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("包名/模块")]),t._v(" "),s("th",[t._v("作用")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("a",{attrs:{href:"https://openresty.org/cn/download.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("openresty"),s("OutboundLink")],1)]),t._v(" "),s("td",[t._v("openresty 本体")])]),t._v(" "),s("tr",[s("td",[s("a",{attrs:{href:"https://github.com/Refinitiv/nginx-sticky-module-ng",target:"_blank",rel:"noopener noreferrer"}},[t._v("nginx-sticky-module-ng"),s("OutboundLink")],1)]),t._v(" "),s("td",[t._v("根据 cookie 转发到同一 upstream")])]),t._v(" "),s("tr",[s("td",[s("a",{attrs:{href:"https://github.com/vozlt/nginx-module-vts",target:"_blank",rel:"noopener noreferrer"}},[t._v("nginx-module-vts"),s("OutboundLink")],1)]),t._v(" "),s("td",[t._v("查看 nginx 状态")])]),t._v(" "),s("tr",[s("td",[s("a",{attrs:{href:"https://github.com/yaoweibin/nginx_upstream_check_module",target:"_blank",rel:"noopener noreferrer"}},[t._v("nginx_upstream_check_module"),s("OutboundLink")],1)]),t._v(" "),s("td",[t._v("检查 upstream")])]),t._v(" "),s("tr",[s("td",[s("a",{attrs:{href:"https://sourceforge.net/projects/pcre/files/pcre/",target:"_blank",rel:"noopener noreferrer"}},[t._v("pcre"),s("OutboundLink")],1)]),t._v(" "),s("td",[t._v("正则匹配")])]),t._v(" "),s("tr",[s("td",[s("a",{attrs:{href:"https://www.openssl.org/source/",target:"_blank",rel:"noopener noreferrer"}},[t._v("openssl"),s("OutboundLink")],1)]),t._v(" "),s("td",[t._v("加解密套件")])]),t._v(" "),s("tr",[s("td",[s("a",{attrs:{href:"https://zlib.net/",target:"_blank",rel:"noopener noreferrer"}},[t._v("zlib"),s("OutboundLink")],1)]),t._v(" "),s("td",[t._v("传输内容 gzip 压缩")])])])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 本次编译使用的资源和版本")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# nginx_upstream_check_module-0.4.0.tar.gz")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# openresty-1.21.4.3.tar.gz")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# openssl-1.1.1w.tar.gz")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# zlib-1.3.tar.gz")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# nginx-module-vts-master.zip")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# pcre-8.45.zip")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# nginx-sticky-module-ng-master.zip")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 解压所有资源")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("find")]),t._v(" ./ "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-name")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"*.tar.gz"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("xargs")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-I")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("tar")]),t._v(" xzvf "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("find")]),t._v(" ./ "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-name")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"*.zip"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("xargs")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-I")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("unzip")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("ul",[s("li",[s("p",[t._v("openresty 的编译顺序为 模块 -> nginx -> 链接")])]),t._v(" "),s("li",[s("p",[t._v("为了静态编译 openresty，重点要注意 "),s("strong",[t._v("--prefix=.")]),t._v(" 和 "),s("strong",[t._v("指定 pcre opensll zlib 模块")])])])]),t._v(" "),s("h3",{attrs:{id:"_1-编译-luajit"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-编译-luajit"}},[t._v("#")]),t._v(" 1. 编译 LuaJIT")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("OPENRESTY_VERSION")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.21")]),t._v(".4.3\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("NGINX_VERSION")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.21")]),t._v(".4\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" openresty-"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${OPENRESTY_VERSION}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" bundle/LuaJIT-* "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" -j"),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("grep")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-c")]),t._v(" ^processor /proc/cpuinfo"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v(")")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("PREFIX")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("pwd")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("LUAROOT")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("pwd")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("rm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-rf")]),t._v(" lib/*.so* "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("/"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("\n")])])]),s("h3",{attrs:{id:"_2-nginx-module-vts-patch"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-nginx-module-vts-patch"}},[t._v("#")]),t._v(" 2. nginx-module-vts patch")]),t._v(" "),s("p",[t._v("nginx-module-vts 和 nginx_upstream_check_module 有冲突，需要打补丁")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" bundle/nginx-"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${NGINX_VERSION}")]),t._v("\npatch "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-p1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("/"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("/"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("/nginx_upstream_check_module-0.4.0/check_1.20.1+.patch\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("/"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("/\n")])])]),s("h3",{attrs:{id:"_3-编译-openresty"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-编译-openresty"}},[t._v("#")]),t._v(" 3. 编译 openresty")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("./configure "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    -j"),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("grep")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-c")]),t._v(" ^processor /proc/cpuinfo"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v(")")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--prefix")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("."),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    --with-cc-opt"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"-O2"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    --with-luajit"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${LUAROOT}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    --with-http_v2_module"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    --with-pcre-jit"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    --with-http_stub_status_module"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    --with-http_ssl_module"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    --with-http_sub_module"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    --with-stream"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    --with-stream_ssl_module"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    --with-stream_ssl_preread_module"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    --add-module"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("/nginx-module-vts-master"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    --add-module"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("/nginx_upstream_check_module-0.4.0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    --add-module"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("/nginx-sticky-module-ng-master"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    --with-zlib"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("/zlib-1.3"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    --with-pcre"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("/pcre-8.45"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    --with-openssl"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("/openssl-1.1.1w"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    --with-http_iconv_module\n\n\ngmake -j"),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("grep")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-c")]),t._v(" ^processor /proc/cpuinfo"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v(")")])]),t._v("\ngmake "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-p")]),t._v(" openresty_"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${OPENRESTY_VERSION}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("cp")]),t._v(" nginx/ lualib/ openresty_"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${OPENRESTY_VERSION}")]),t._v("/ "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-r")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("tar")]),t._v(" czvf openresty_"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${OPENRESTY_VERSION}")]),t._v(".tar.gz openresty_"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${OPENRESTY_VERSION}")]),t._v("\n")])])]),s("p",[t._v("注意：")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("运行时需要注意 "),s("strong",[t._v("工作目录")]),t._v("，"),s("strong",[t._v("从 `pwd` 到 nginx 的路径一定要为 ./nginx/sbin/nginx")]),t._v("，nginx 可执行文件依靠工作目录寻找 LuaJIT 运行库。")])]),t._v(" "),s("li",[s("p",[t._v("此方法编译出的 openresty "),s("strong",[t._v("依赖编译机器使用的 glibc")]),t._v("，需要"),s("strong",[t._v("确保使用 openresty 的主机有同样版本的 glibc")]),t._v("。")])])]),t._v(" "),s("h3",{attrs:{id:"_4-安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-安装"}},[t._v("#")]),t._v(" 4. 安装")]),t._v(" "),s("p",[t._v("将 openresty_${OPENRESTY_VERSION}.tar.gz 复制到目标主机任意目录并解压")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("INSTALL_DIR")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/opt"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("OPENRESTY_VERSION")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.21")]),t._v(".4.3\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 解压本体")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("tar")]),t._v(" xzvf openresty_"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${OPENRESTY_VERSION}")]),t._v(".tar.gz\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 配置 logrotate")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("cat")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("EOF"),s("span",{pre:!0,attrs:{class:"token bash punctuation"}},[t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" /etc/logrotate.d/openresty_"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${OPENRESTY_VERSION}")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${INSTALL_DIR}")]),t._v("/openresty_"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${OPENRESTY_VERSION}")]),t._v("/nginx/logs/access.log\n"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${INSTALL_DIR}")]),t._v("/openresty_"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${OPENRESTY_VERSION}")]),t._v("/nginx/logs/error.log\n{\n    daily\n    rotate 15\n    copytruncate\n    missingok\n    dateext\n    compress\n    notifempty\n}\nEOF")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 配置 systemd")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("cat")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("EOF"),s("span",{pre:!0,attrs:{class:"token bash punctuation"}},[t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" /etc/systemd/system/nginx.service")]),t._v("\n[Unit]\nDescription=The NGINX HTTP and reverse proxy server\nAfter=syslog.target network-online.target remote-fs.target nss-lookup.target\nWants=network-online.target\n\n[Service]\nType=forking\nWorkingDirectory="),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${INSTALL_DIR}")]),t._v("/openresty_"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${OPENRESTY_VERSION}")]),t._v("\nPIDFile="),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${INSTALL_DIR}")]),t._v("/openresty_"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${OPENRESTY_VERSION}")]),t._v("/nginx/logs/nginx.pid\nExecStartPre="),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${INSTALL_DIR}")]),t._v("/openresty_"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${OPENRESTY_VERSION}")]),t._v("/nginx/sbin/nginx -t\nExecStart="),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${INSTALL_DIR}")]),t._v("/openresty_"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${OPENRESTY_VERSION}")]),t._v("/nginx/sbin/nginx\nExecReload="),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${INSTALL_DIR}")]),t._v("/openresty_"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${OPENRESTY_VERSION}")]),t._v("/nginx/sbin/nginx -s reload\nExecStop=/bin/kill -s QUIT "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$MAINPID")]),t._v("\nPrivateTmp=true\n\n[Install]\nWantedBy=multi-user.target\nEOF")]),t._v("\n")])])])])}),[],!1,null,null,null);s.default=e.exports}}]);